Version 4
SHEET 1 880 724
WIRE -5408 -3088 -6368 -3088
WIRE -4912 -3088 -5408 -3088
WIRE -4912 -2896 -4912 -3088
WIRE -4912 -2720 -4912 -2816
WIRE -6528 -2288 -6656 -2288
WIRE -6368 -2288 -6368 -3088
WIRE -6368 -2288 -6448 -2288
WIRE -5568 -2288 -5696 -2288
WIRE -5408 -2288 -5408 -3088
WIRE -5408 -2288 -5488 -2288
WIRE -6368 -2144 -6368 -2288
WIRE -5408 -2144 -5408 -2288
WIRE -6656 -2128 -6656 -2288
WIRE -6416 -2128 -6656 -2128
WIRE -5696 -2128 -5696 -2288
WIRE -5456 -2128 -5696 -2128
WIRE -9728 -2048 -9968 -2048
WIRE -9488 -2048 -9728 -2048
WIRE -9248 -2048 -9488 -2048
WIRE -8784 -2048 -9248 -2048
WIRE -6656 -2048 -6656 -2128
WIRE -5696 -2048 -5696 -2128
WIRE -8784 -1936 -8784 -2048
WIRE -9968 -1920 -9968 -2048
WIRE -9728 -1920 -9728 -2048
WIRE -6656 -1904 -6656 -1968
WIRE -5696 -1904 -5696 -1968
WIRE -8784 -1824 -8784 -1856
WIRE -7664 -1824 -8784 -1824
WIRE -6848 -1824 -7664 -1824
WIRE -6704 -1824 -6848 -1824
WIRE -5888 -1824 -6064 -1824
WIRE -5744 -1824 -5888 -1824
WIRE -8784 -1792 -8784 -1824
WIRE -9488 -1744 -9488 -2048
WIRE -9728 -1728 -9728 -1840
WIRE -9520 -1728 -9728 -1728
WIRE -6848 -1728 -6848 -1824
WIRE -5888 -1728 -5888 -1824
WIRE -9328 -1712 -9456 -1712
WIRE -9184 -1712 -9328 -1712
WIRE -8832 -1712 -9104 -1712
WIRE -9968 -1696 -9968 -1840
WIRE -9520 -1696 -9968 -1696
WIRE -9968 -1648 -9968 -1696
WIRE -9728 -1648 -9728 -1728
WIRE -9488 -1600 -9488 -1680
WIRE -8784 -1568 -8784 -1696
WIRE -6848 -1552 -6848 -1648
WIRE -6656 -1552 -6656 -1808
WIRE -5888 -1552 -5888 -1648
WIRE -5696 -1552 -5696 -1808
WIRE -9728 -1472 -9728 -1568
WIRE -9328 -1408 -9328 -1712
WIRE -7520 -1408 -9328 -1408
WIRE -6064 -1408 -6064 -1824
WIRE -6064 -1408 -7520 -1408
WIRE -9968 -1232 -9968 -1568
WIRE -9968 -1232 -10400 -1232
WIRE -7264 -1200 -7408 -1200
WIRE -7104 -1200 -7264 -1200
WIRE -6976 -1200 -7104 -1200
WIRE -6832 -1200 -6976 -1200
WIRE -6640 -1200 -6832 -1200
WIRE -6368 -1168 -6368 -2048
WIRE -5904 -1168 -6368 -1168
WIRE -5408 -1168 -5408 -2048
WIRE -5408 -1168 -5824 -1168
WIRE -6640 -1104 -6640 -1200
WIRE -7264 -1072 -7264 -1200
WIRE -7520 -1056 -7520 -1408
WIRE -7312 -1056 -7520 -1056
WIRE -9552 -1040 -9760 -1040
WIRE -9248 -1040 -9248 -2048
WIRE -9248 -1040 -9552 -1040
WIRE -6368 -992 -6368 -1168
WIRE -6096 -992 -6368 -992
WIRE -7104 -976 -7104 -1200
WIRE -6640 -960 -6640 -1024
WIRE -9760 -944 -9760 -1040
WIRE -7408 -912 -7408 -1200
WIRE -7664 -896 -7664 -1824
WIRE -7456 -896 -7664 -896
WIRE -10400 -880 -10400 -1232
WIRE -10224 -880 -10400 -880
WIRE -10048 -880 -10160 -880
WIRE -5408 -880 -5408 -1168
WIRE -5504 -832 -5776 -832
WIRE -9760 -800 -9760 -864
WIRE -10400 -784 -10400 -880
WIRE -9472 -784 -9648 -784
WIRE -9328 -784 -9392 -784
WIRE -6096 -736 -6096 -992
WIRE -6832 -720 -6832 -1200
WIRE -9552 -704 -9552 -1040
WIRE -7264 -704 -7264 -976
WIRE -6928 -704 -7264 -704
WIRE -6864 -704 -6928 -704
WIRE -9648 -688 -9648 -784
WIRE -9584 -688 -9648 -688
WIRE -6704 -688 -6800 -688
WIRE -6656 -688 -6704 -688
WIRE -6512 -688 -6576 -688
WIRE -6192 -688 -6512 -688
WIRE -9328 -672 -9328 -784
WIRE -9328 -672 -9520 -672
WIRE -7712 -672 -9328 -672
WIRE -7104 -672 -7104 -896
WIRE -7104 -672 -7632 -672
WIRE -6864 -672 -7104 -672
WIRE -10048 -656 -10048 -880
WIRE -9952 -656 -10048 -656
WIRE -9776 -656 -9872 -656
WIRE -9584 -656 -9776 -656
WIRE -10400 -640 -10400 -704
WIRE -10400 -640 -10576 -640
WIRE -6704 -608 -6704 -688
WIRE -6512 -608 -6512 -688
WIRE -10400 -592 -10400 -640
WIRE -9776 -592 -9776 -656
WIRE -10576 -576 -10576 -640
WIRE -6832 -576 -6832 -656
WIRE -9552 -544 -9552 -640
WIRE -9648 -512 -9648 -688
WIRE -7264 -512 -7264 -704
WIRE -6928 -512 -6928 -704
WIRE -6512 -512 -6512 -544
WIRE -6512 -512 -6928 -512
WIRE -9776 -448 -9776 -512
WIRE -10400 -416 -10400 -512
WIRE -10224 -416 -10400 -416
WIRE -10048 -416 -10048 -656
WIRE -10048 -416 -10160 -416
WIRE -9648 -384 -9648 -432
WIRE -6096 -272 -6096 -640
WIRE -6096 -272 -6368 -272
WIRE -6976 -240 -6976 -1200
WIRE -6832 -240 -6976 -240
WIRE -6832 -128 -6832 -240
WIRE -7408 -112 -7408 -816
WIRE -6912 -112 -7408 -112
WIRE -6864 -112 -6912 -112
WIRE -6720 -96 -6800 -96
WIRE -6672 -96 -6720 -96
WIRE -6512 -96 -6592 -96
WIRE -5776 -96 -5776 -832
WIRE -5776 -96 -6512 -96
WIRE -7104 -80 -7104 -672
WIRE -6864 -80 -7104 -80
WIRE -6720 -16 -6720 -96
WIRE -6512 -16 -6512 -96
WIRE -7408 0 -7408 -112
WIRE -6832 16 -6832 -64
WIRE -7104 80 -7104 32
WIRE -6912 80 -6912 -112
WIRE -6512 80 -6512 48
WIRE -6512 80 -6912 80
WIRE -6976 112 -6976 -240
WIRE -6896 112 -6976 112
WIRE -6368 176 -6368 -272
WIRE -5904 176 -6368 176
WIRE -5408 176 -5408 -784
WIRE -5408 176 -5904 176
WIRE -6896 208 -6896 112
WIRE -6752 224 -6864 224
WIRE -7408 240 -7408 80
WIRE -7264 240 -7264 -432
WIRE -7264 240 -7408 240
WIRE -7184 240 -7264 240
WIRE -7024 240 -7104 240
WIRE -6928 240 -7024 240
WIRE -6368 256 -6368 176
WIRE -6368 256 -6864 256
WIRE -6896 336 -6896 272
WIRE -5904 400 -5904 176
WIRE -7264 448 -7264 400
WIRE -7024 480 -7024 240
WIRE -6944 480 -7024 480
WIRE -6816 480 -6864 480
WIRE -6752 480 -6752 224
WIRE -6752 480 -6816 480
WIRE -6752 560 -6752 480
WIRE -5904 560 -5904 480
WIRE -6944 592 -6992 592
WIRE -6816 592 -6816 480
WIRE -6816 592 -6880 592
WIRE -6752 704 -6752 640
FLAG -6848 -1552 0
FLAG -6656 -1552 0
FLAG -4912 -2720 0
FLAG -5888 -1552 0
FLAG -5696 -1552 0
FLAG -5904 560 0
FLAG -6832 -576 0
FLAG -6832 16 0
FLAG -6640 -960 0
FLAG -6896 336 0
FLAG -6752 704 0
FLAG -10576 -576 0
FLAG -9776 -448 0
FLAG -9552 -544 0
FLAG -9760 -800 0
FLAG -9728 -1472 0
FLAG -9488 -1600 0
FLAG -8784 -1568 0
FLAG -6528 -464 0
FLAG -6512 128 0
FLAG -7104 80 0
FLAG -7264 448 0
FLAG -9648 -384 0
SYMBOL res -5920 384 R0
SYMATTR InstName R1
SYMATTR Value 0.1
SYMBOL pmos -6416 -2048 M180
SYMATTR InstName M1
SYMATTR Value AOD4185
SYMBOL res -5808 -1184 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 3.3
SYMBOL res -6672 -2064 R0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res -6432 -2304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 100k
SYMBOL voltage -4912 -2912 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 15
SYMBOL nmos -6704 -1904 R0
SYMATTR InstName M2
SYMATTR Value IRLML0040
SYMBOL res -6864 -1744 R0
SYMATTR InstName R5
SYMATTR Value 100k
SYMBOL pmos -5456 -2048 M180
SYMATTR InstName M3
SYMATTR Value AOD4185
SYMBOL res -5712 -2064 R0
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL res -5472 -2304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 100k
SYMBOL nmos -5744 -1904 R0
SYMATTR InstName M4
SYMATTR Value IRLML0040
SYMBOL res -5904 -1744 R0
SYMATTR InstName R9
SYMATTR Value 100k
SYMBOL res -6560 -704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 120
SYMBOL OpAmps\\MAX4230 -6832 -752 R0
SYMATTR InstName U3
SYMBOL OpAmps\\MAX4230 -6832 -160 R0
SYMATTR InstName U4
SYMBOL voltage -6640 -1120 R0
WINDOW 3 50 42 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value 3.3
SYMATTR InstName V3
SYMBOL res -6576 -112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 120
SYMBOL res -7120 -992 R0
SYMATTR InstName R11
SYMATTR Value 100k
SYMBOL res -7616 -688 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 100k
SYMBOL pmos -7312 -976 M180
SYMATTR InstName M5
SYMATTR Value AO3423
SYMBOL pmos -7456 -816 M180
SYMATTR InstName M6
SYMATTR Value AO3423
SYMBOL res -7280 -528 R0
SYMATTR InstName R13
SYMATTR Value 100k
SYMBOL res -7424 -16 R0
SYMATTR InstName R14
SYMATTR Value 100k
SYMBOL res -7088 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 100k
SYMBOL OpAmps\\MAX4230 -6896 176 M0
SYMATTR InstName U5
SYMBOL res -6848 464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 100k
SYMBOL res -6768 544 R0
SYMATTR InstName R17
SYMATTR Value 22k
SYMBOL voltage -10400 -800 R0
WINDOW 3 50 42 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value SINE(0 2.6 0.1)
SYMATTR InstName V2
SYMBOL voltage -10400 -608 R0
WINDOW 3 50 42 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value SINE(0 2.6 0.1)
SYMATTR InstName V4
SYMBOL schottky -10224 -864 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 10MQ060N
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky -10224 -400 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value 10MQ060N
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res -9792 -608 R0
SYMATTR InstName R18
SYMATTR Value 10k
SYMBOL OpAmps\\MAX4230 -9552 -736 R0
SYMATTR InstName U6
SYMBOL voltage -9760 -960 R0
WINDOW 3 50 42 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value 3.3
SYMATTR InstName V5
SYMBOL res -9984 -1936 R0
SYMATTR InstName R19
SYMATTR Value 100k
SYMBOL res -9984 -1664 R0
SYMATTR InstName R20
SYMATTR Value 100k
SYMBOL res -9744 -1936 R0
SYMATTR InstName R21
SYMATTR Value 100k
SYMBOL res -9744 -1664 R0
SYMATTR InstName R22
SYMATTR Value 100k
SYMBOL OpAmps\\MAX4230 -9488 -1776 R0
SYMATTR InstName U7
SYMBOL res -8800 -1952 R0
SYMATTR InstName R23
SYMATTR Value 1k
SYMBOL nmos -8832 -1792 R0
SYMATTR InstName M7
SYMATTR Value IRLML0040
SYMBOL res -9088 -1728 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R24
SYMATTR Value 10k
SYMBOL cap -6528 -608 R0
SYMATTR InstName C1
SYMATTR Value 22p
SYMBOL cap -6528 -16 R0
SYMATTR InstName C2
SYMATTR Value 22p
SYMBOL AutoGenerated\\2n6388 -6128 -688 R0
SYMATTR InstName U1
SYMBOL AutoGenerated\\2n6388 -5440 -832 R0
SYMATTR InstName U2
SYMBOL cap -6880 576 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 100p
SYMBOL cap -7120 -32 R0
SYMATTR InstName C4
SYMATTR Value 1n
SYMBOL cap -7280 336 R0
SYMATTR InstName C5
SYMATTR Value 100p
SYMBOL res -9664 -528 R0
SYMATTR InstName R25
SYMATTR Value 100k
SYMBOL res -9376 -800 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R26
SYMATTR Value 1k
SYMBOL res -9856 -672 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R27
SYMATTR Value 100k
TEXT -5904 -1272 Left 2 !.tran 300s
